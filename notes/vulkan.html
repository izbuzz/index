<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2025-01-13" />
  <title>Vulkan</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../style.css" />
<link rel="stylesheet" href="../light.css" media="(prefers-color-scheme: light)">
<link rel="stylesheet" href="../dark.css" media="(prefers-color-scheme: dark)">
<script src="../dark.js"></script>
<script src="../toggle.js" defer></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="dark.js" async defer></script>
</head>
<body>
  <nav class="row row-gap row-start row-stretch" id="nav_margin">
    <div class="row">
      <div class="medium_spacer space_navbar"></div>
      <div>&nbsp;</div>
      <div class="small_spacer space_navbar"></div>
    </div>
    <a class="flatbutton row row-start" href="../index.html">
      <div class="square_icon"></div><div>HOME</div>
    </a>
    <a class="flatbutton row row-start" href="../notes.html">
      <div class="square_icon"></div><div>ARCHIVE</div>
    </a>
    <a class="flatbutton row row-start" href="../notes.html" aria-current="page">
      <div class="square_icon"></div><div>NOTES</div>
    </a>
    <a class="flatbutton row row-start" href="../about.html">
      <div class="square_icon"></div><div>ABOUT</div>
    </a>
    <button id="toggle_theme" class="row align_self_end" aria-label="Cycle between light, auto, and dark theme">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon auto" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><circle cx="128" cy="128" r="96" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="128" y1="32" x2="128" y2="224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="192" y1="56.45" x2="192" y2="199.55" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="37.47" x2="160" y2="218.53" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon sun" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon moon" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M235.54,150.21a104.84,104.84,0,0,1-37,52.91A104,104,0,0,1,32,120,103.09,103.09,0,0,1,52.88,57.48a104.84,104.84,0,0,1,52.91-37,8,8,0,0,1,10,10,88.08,88.08,0,0,0,109.8,109.8,8,8,0,0,1,10,10Z"/></svg>
    </button>
  </nav>
<main class="content">
<header id="title-block-header">
<h1 class="title">Vulkan</h1>
<div class="date row row-start">
<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><rect x="40" y="40" width="176" height="176" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="176" y1="24" x2="176" y2="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="80" y1="24" x2="80" y2="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="40" y1="88" x2="216" y2="88" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><circle cx="128" cy="132" r="12"/><circle cx="172" cy="132" r="12"/><circle cx="84" cy="172" r="12"/><circle cx="128" cy="172" r="12"/><circle cx="172" cy="172" r="12"/></svg>
<div>&nbsp;</div>
<p>
2025-01-13
</p>
</div>
</header>
<h1 id="vulkan">Vulkan</h1>
<h2 id="startup">Startup</h2>
<p>VkInstance -&gt; VkPhysicalDevice -&gt; VKDevice</p>
<p><strong>VkInstance</strong> for validation layers, extensions, and
loggers. Usually only one will suffice for most applications. Extensions
can slow down the driver so only enable neccessary ones.</p>
<p><strong>VkPhysicalDevice</strong> represents GPUs queried by
VkInstance. No communication is allowed yet.</p>
<p><strong>VKDevice</strong> is gained from VkPhysicalDevice and is used
to communicate with the GPU. Most Vulkan commands require this.</p>
<p>Vulkan allows manual multi-GPU configuration, multiple VKDevice can
be made and assigned commands.</p>
<p>Swapchain is optional (headless applications) and is the main way to
present an image to the screen. They are internally lists of images but
typically 2 or 3 are used for double or triple buffering. Present modes:
* VK_PRESENT_MODE_IMMEDIATE_KHR * VK_PRESENT_MODE_FIFO_KHR *
VK_PRESENT_MODE_FIFO_RELAXED_KHR * VK_PRESENT_MODE_MAILBOX_KHR</p>
<h2 id="commands-and-queues">Commands and Queues</h2>
<p>VkCommandBuffer is created from VkCommandPool Record VkCmds into the
VkCommandBuffer. Then submit the buffer into a VkQueue.</p>
<p>Command records are cheaps while submitting them are not
(VkQueueSubmit). Multithreaded code will have a VkCommandPool and
VkCommandBuffer each thread and submit commands one at a time
(VkQueueSubmit is not threadsafe)</p>
<p>Queues can have a different family, dictating the type of queue and
supported commands.</p>
<p>NOTE: Transfer-only queues are great for loading assets. Lifecycle:
https://registry.khronos.org/vulkan/specs/1.2-extensions/html/chap6.html#commandbuffers-lifecycle</p>
<h2 id="renderpass">Renderpass</h2>
<p>Renderpasses are the main ways, besides compute commands to render to
the screen. Renderpassees are made of subpasses, which are useful on
mobile GPUs to optimize work out. On desktop, this is not much of an
advantage, but there must be at least one subpass in a renderpass.</p>
<p>Renderpasses will render into a framebuffer, which links the images
to be rendered to.</p>
<p>Image layouts dictate the state of images, as we have no control over
how GPUs manipulate image layouts during processing. There are four
layouts: * VK_IMAGE_LAYOUT_UNDEFINED *
VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL (rendering commands) *
VK_IMAGE_LAYOUT_PRESENT_SRC_KHR (rendering to screen) *
VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL (reading from shaders)</p>
</main>
</body>
</html>
