<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2024-08-08" />
  <title>Web Setup</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../style.css" />
<link rel="stylesheet" href="../light.css" media="(prefers-color-scheme: light)">
<link rel="stylesheet" href="../dark.css" media="(prefers-color-scheme: dark)">
<script src="../dark.js"></script>
<script src="../toggle.js" defer></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="dark.js" async defer></script>
</head>
<body>
  <nav class="row row-gap row-start row-stretch" id="nav_margin">
    <div class="row">
      <div class="medium_spacer space_navbar"></div>
      <div>&nbsp;</div>
      <div class="small_spacer space_navbar"></div>
    </div>
    <a class="flatbutton row row-start" href="../index.html">
      <div class="square_icon"></div><div>HOME</div>
    </a>
    <a class="flatbutton row row-start" href="../archive.html" aria-current="page">
      <div class="square_icon"></div><div>ARCHIVE</div>
    </a>
    <a class="flatbutton row row-start" href="../notes.html">
      <div class="square_icon"></div><div>NOTES</div>
    </a>
    <a class="flatbutton row row-start" href="../about.html">
      <div class="square_icon"></div><div>ABOUT</div>
    </a>
    <button id="toggle_theme" class="row align_self_end" aria-label="Cycle between light, auto, and dark theme">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon auto" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><circle cx="128" cy="128" r="96" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="128" y1="32" x2="128" y2="224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="192" y1="56.45" x2="192" y2="199.55" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="37.47" x2="160" y2="218.53" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon sun" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon moon" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M235.54,150.21a104.84,104.84,0,0,1-37,52.91A104,104,0,0,1,32,120,103.09,103.09,0,0,1,52.88,57.48a104.84,104.84,0,0,1,52.91-37,8,8,0,0,1,10,10,88.08,88.08,0,0,0,109.8,109.8,8,8,0,0,1,10,10Z"/></svg>
    </button>
  </nav>
<main class="content">
<header id="title-block-header">
<h1 class="title">Web Setup</h1>
<div class="date row row-start">
<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><rect x="40" y="40" width="176" height="176" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="176" y1="24" x2="176" y2="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="80" y1="24" x2="80" y2="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="40" y1="88" x2="216" y2="88" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><circle cx="128" cy="132" r="12"/><circle cx="172" cy="132" r="12"/><circle cx="84" cy="172" r="12"/><circle cx="128" cy="172" r="12"/><circle cx="172" cy="172" r="12"/></svg>
<div>&nbsp;</div>
<p>
2024-08-08
</p>
</div>
<div class="abstract row row-start row-gap row-stretch"">
<!-- <div class="abstract-title">Abstract</div> -->
<div class="row">
 <div class="medium_spacer"></div>
 <div>&nbsp;</div>
 <div class="small_spacer"></div>
</div>
<p>DIY site, or how I subjected myself to gymnastics create a
website.</p>
</div>
</header>
<p>Notes for how to setup this website. Unfortunately or fortunately, no
static site generators were. No this is not hardcore, it is kind of
brutal honestly. There is less between me and the notes. Close to the
metal kind of thing… except I do not want to be close because the metal
is a metal spike that is webdev.</p>
<h2 id="components">Components</h2>
<p>The core part of the setup is a lousy Makefile, whose main goal is to
convert markdown files into html files using <code>pandoc</code>. Yes,
the page you are reading right now used to be a markdown file.
Horrifying. A lot of other static site generators do something similar,
though probably without <code>pandoc</code>.</p>
<p>The downsides of this <code>pandoc</code> method is likely speed and
performance, but unless I have thousands of notes, this should scale
pretty well. And I can just throw more threads at it. The bigger issue
is indexing the notes.</p>
<p>Indexing is done through a small bash script
<code>index_notes</code>, which simply reads notes in some directory for
a front matter. It then sorts the parsed front matter base on the date.
Finally it groups the metadata in the same years. As it groups them, it
generates html based on the data.</p>
<p>The final step is the hardest. We use <code>sed</code> to replace the
string <code>{NOTES}</code> in a html file which serves as a template,
with the result of the <code>index_notes</code> script. So the only
dependencies are</p>
<ul>
<li>make</li>
<li>sed (GNU)</li>
<li>pandoc</li>
<li>bash</li>
<li>sort</li>
</ul>
<p>Oh and there is also <code>index_archive</code> because for the blogs
instead. The reason is because notes don’t really have a date since they
are more of a living document and prone to be edited compared with
blogs.</p>
<h2 id="templates">Templates</h2>
<p>I like differentiating notes from more opinionated pieces. This one
is opinionated, yes. I keep pieces like this in <code>archive/</code>
and notes in <code>notes/</code>. And so in the Makefile there are</p>
<pre class="make"><code>NOTES := $(wildcard notes/*.md)
BLOGS := $(wildcard blogs/*.md)

ARCHIVE_INDEX := templates/archive.html
NOTES_INDEX := templates/notes.html
HTML := templates/template.html

CSS := style.css</code></pre>
<p>The templates themselves are literally just html files. In
particular, <code>templates/template.html</code> is <code>pandoc</code>
specific template. The rest are regular html files with something like
<code>{NOTE}</code> inside. Yes, <code>sed</code> is used as a poor
man’s templates.</p>
<p>A call to <code>make all</code> turns all the notes and blogs into
html and a call to <code>make index</code> creates the
<code>archive.html</code> and <code>notes.html</code> which holds links
to them.</p>
<h2 id="process">Process</h2>
<p>So the steps for publishing are</p>
<ol type="1">
<li>Write a .md file in the notes/blog directory, include the front
matter (title and date)</li>
<li>Run <code>make</code></li>
<li>Run <code>make index</code> only when adding or removing</li>
<li>Profit?</li>
</ol>
<h2 id="end">End</h2>
<p>There a lot of cons with this setup, and I can definitely see why
someone might use actual static site generators instead.</p>
<ul>
<li>For one, the nav bar is duplicated in every single file. There like
6-7 files I have to edit manually</li>
<li>The indexing is just not clean, duplicate logic is used to index the
two types</li>
<li>Actual templates will be awesome, especially since there are actual
templating languages like nunjucks or liquid</li>
</ul>
<p>Wit regards to templates, right now the indexing scripts are absolute
monstrosities to look at and debug. An actual template with support for
something like <code>foreach( note, do_this )</code> would come a long
way.</p>
<p>The only benefit is the huge control I have over the stack. I might
just explore static site generators which are less intrusive when I
can’t take anymore.</p>
<p>11ty seems like a good option?</p>
<p>:)</p>
</main>
</body>
</html>
